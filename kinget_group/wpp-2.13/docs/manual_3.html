<HTML>
<HEAD>
<TITLE>[ WPP - The Web Preprocessor ]  A step by step example</TITLE>
<LINK REV=MADE HREF="mailto:lm@geocities.com">
<META NAME="author" CONTENT="Marco (LM) Lamberto - lm@geocities.com">
<META NAME="description" CONTENT="WPP is a small perl script that allows preprocessing of html files.  It's useful for giving an uniform layout to different html pages. It can be used into cgi scripts for dynamic generation of pages.">
<META NAME="keywords" CONTENT="html, preprocessor, preprocessing, web, perl, script, cgi, the sunny spot">
<META NAME="generator" CONTENT="By Hand v1.0 with VIM for Linux + WPP ;)">


</HEAD>














<BODY BGCOLOR="#ffffff">
<FONT FACE="arial,helvetica">

<CENTER>
<TABLE WIDTH="100%" BORDER=0 CELLSPACING=0 CELLPADDING=0 BGCOLOR="#000000">
<TR VALIGN=MIDDLE>
<TD ALIGN=LEFT><A
	HREF="http://www.geocities.com/Tokyo/1474/"><IMG SRC="images/tss_logo.gif" WIDTH=90 HEIGHT=32 ALT="[ The Sunny Spot ]" BORDER=0></A></TD>
<TD ALIGN=CENTER WIDTH="70%">
	<FONT FACE="arial,helvetica" COLOR="#ffffff">
	<FONT SIZE="+1"><B>WPP v2.13 - The Web Preprocessor</B></FONT><BR>
	<FONT SIZE="-1">Author : <A HREF="mailto:lm@geocities.com">
	

<FONT FACE="arial,helvetica" COLOR="#ffffff">Marco Lamberto</FONT></A></FONT>
	</FONT>
</TD>
<TD ALIGN=RIGHT><A
	HREF="http://www.geocities.com/Tokyo/1474/wpp/"><IMG SRC="images/pp_by_wpp.gif" WIDTH=90 HEIGHT=32 ALT="Preprocessed by WPP" BORDER=0></A></TD>

<TR><TD BGCOLOR="#ffffff" COLSPAN=3><IMG
	SRC="images/null.gif" WIDTH=1 HEIGHT=2 ALT=""></TD>
















<TR>
<TD BGCOLOR="#eecc66">
&nbsp;&nbsp;

<A HREF="index.html">
	

<FONT FACE="arial,helvetica" COLOR="#000000"><B>Index</B></FONT></A>

</TD>
<TD COLSPAN=2 ALIGN=RIGHT BGCOLOR="#eecc66">

<A HREF="manual_2.html">
	

<FONT FACE="arial,helvetica" COLOR="#000000"><B>&lt; Previous</B></FONT></A>

&nbsp;&nbsp;
<A HREF="manual_4.html">
	

<FONT FACE="arial,helvetica" COLOR="#000000"><B>Next &gt;</B></FONT></A>
&nbsp;&nbsp;
</TD>
<TR><TD COLSPAN=3 BGCOLOR="#000000"><IMG SRC="images/null.gif" BORDER=0
	WIDTH=1 HEIGHT=2 ALT=""></TD>


</TABLE>
</CENTER>
<P>



<DL>


<!-- Step 1: Yor first file -->
<DT><P>
<TABLE WIDTH="100%" CELLSPACING=0 CELLPADDING=0 BORDER=0>
<TR><TD BGCOLOR="#eecc66"><A NAME="S1">&nbsp;&nbsp;</A><FONT
	FACE="arial,helvetica"><B>Step 1: Yor first file</B></FONT></TD>
	<TD BGCOLOR="#eecc66" ALIGN=right><A HREF="#" onMouseOver="status='Top of the page';		return true"><IMG SRC="images/arrow_up.gif" WIDTH=14 HEIGHT=14		ALT="[ ^ ]" BORDER=0></A></TD>
</TABLE>
<DD><P>
<DD><P>
Suppose you have a file <B>p.html</B> that you wish to generate throught
wpp.<BR>
Make a 'raw/templates' directory with the command:<BR>
&nbsp;&nbsp;<B>mkdir -p raw/templates</B>
<P>Files in the raw directory are called raw files, files in the templates
directory are called templates.<BR>
Enter into the raw directory and start writing a new file called <B>p.raw</B>

<DL>
<DD>



<!-- BOX Open -->
<TABLE CELLSPACING=0 CELLPADDING=2 BORDER=0
	
	
>

<TR><TD BGCOLOR="#cccccc"
	><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
	<TR><TD
		 ALIGN=CENTER 
	BGCOLOR="#cccccc"><FONT 
		 FACE="helvetica" 
		
		 COLOR="#000000" 
	>p.raw</FONT></TD>

	<TR><TD
		 BGCOLOR="#eeeeee" 
		
	><FONT FACE="arial,helvetica">
<!-- -->
<FONT COLOR="#550000">@HEAD@<BR>@TAIL@<BR>$Date$<BR></FONT>
	&lt;HTML&gt;<BR>
	&lt;HEAD&gt;<BR>
	&lt;TITLE&gt;Generated from p.raw&lt;/TITLE&gt;<BR>
	&lt;/HEAD&gt;<P>
	&lt;BODY&gt;<BR>
	&lt;H1&gt;Generated from p.raw&lt;/H1&gt;<BR>
	&lt;/BODY&gt;<BR>
	&lt;/HTML&gt;
<!-- -->
	</FONT>
	</TD>
	</TABLE></TD>
</TABLE>
<!-- BOX Close -->
</DL>

p.raw resemble a common html file except from the first three lines.<BR>
Generate the <B>../p.html</B> file with the command<BR>
&nbsp;&nbsp;<B>wpp p.raw</B>
<P>Suppose you want to change the "<B>Generated from p.raw</B>" title it into
"<B>My First Page</B>", you have to write it twice.
You could use <B>sed</B> but if you don't know it or don't want to use it the
best solution is to use wpp.<BR>

<DL>
<DD>


<!-- BOX Open -->
<TABLE CELLSPACING=0 CELLPADDING=2 BORDER=0
	
	
>

<TR><TD BGCOLOR="#cccccc"
	><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
	<TR><TD
		 ALIGN=CENTER 
	BGCOLOR="#cccccc"><FONT 
		 FACE="helvetica" 
		
		 COLOR="#000000" 
	>p.raw</FONT></TD>

	<TR><TD
		 BGCOLOR="#eeeeee" 
		
	><FONT FACE="arial,helvetica">
<!-- -->
<FONT COLOR="#777777">@HEAD@<BR>@TAIL@<BR>$Date$<BR></FONT>
<FONT COLOR="#550000">@TITLE=My First Page@<BR></FONT>
	&lt;HTML&gt;<BR>
	&lt;HEAD&gt;<BR>
<FONT COLOR="#550000">&lt;TITLE&gt;@TITLE@&lt;/TITLE&gt;<BR></FONT>
	&lt;/HEAD&gt;<P>
	&lt;BODY&gt;<BR>
<FONT COLOR="#550000">&lt;H1&gt;@TITLE@&lt;/H1&gt;<BR></FONT>
	&lt;/BODY&gt;<BR>
	&lt;/HTML&gt;
<!-- -->
	</FONT>
	</TD>
	</TABLE></TD>
</TABLE>
<!-- BOX Close -->
</DL>

In the fourth line we have declared a simple variable called <B>TITLE</B>, so
every time you want to change the title of p.raw you should edit it once.
<P>

<DT><!-- Step 2: Using templates -->
<DT><P>
<TABLE WIDTH="100%" CELLSPACING=0 CELLPADDING=0 BORDER=0>
<TR><TD BGCOLOR="#eecc66"><A NAME="S2">&nbsp;&nbsp;</A><FONT
	FACE="arial,helvetica"><B>Step 2: Using templates</B></FONT></TD>
	<TD BGCOLOR="#eecc66" ALIGN=right><A HREF="#" onMouseOver="status='Top of the page';		return true"><IMG SRC="images/arrow_up.gif" WIDTH=14 HEIGHT=14		ALT="[ ^ ]" BORDER=0></A></TD>
</TABLE>
<DD><P>
<DD><P>
You may need to write two or more file with common header and footer (except
from title or something else).<BR>
By default WPP include a file <B>templates/head.tmpl</B> after the $Date$
tag and a <B>templates/tail.tmpl</B> at the end of file.<BR>
In the first step we have used the <B><A HREF="manual_5.html#HEAD">@HEAD@</A></B>
and <B><A HREF="manual_5.html#TAIL">@TAIL@</A></B> directives in order to avoid to
include them.<BR>
Now you can change <B>p.raw</B> and create <B>templates/head.tmpl</B> and
<B>templates/tail.tmpl</B>.

<DL>
<DD>
<TABLE>
<TR VALIGN=TOP><TD>



<!-- BOX Open -->
<TABLE CELLSPACING=0 CELLPADDING=2 BORDER=0
	
	
>

<TR><TD BGCOLOR="#cccccc"
	><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
	<TR><TD
		 ALIGN=CENTER 
	BGCOLOR="#cccccc"><FONT 
		 FACE="helvetica" 
		
		 COLOR="#000000" 
	>p.raw</FONT></TD>

	<TR><TD
		 BGCOLOR="#eeeeee" 
		
	><FONT FACE="arial,helvetica">
<!-- -->
	@TITLE=My First Page@<BR>
	$Date$<BR>
	This is an example page.<BR>
	...
<!-- -->
	</FONT>
	</TD>
	</TABLE></TD>
</TABLE>
<!-- BOX Close -->
</TD><TD>



<!-- BOX Open -->
<TABLE CELLSPACING=0 CELLPADDING=2 BORDER=0
	
	
>

<TR><TD BGCOLOR="#cccccc"
	><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
	<TR><TD
		 ALIGN=CENTER 
	BGCOLOR="#cccccc"><FONT 
		 FACE="helvetica" 
		
		 COLOR="#000000" 
	>templates/head.tmpl</FONT></TD>

	<TR><TD
		 BGCOLOR="#eeeeee" 
		
	><FONT FACE="arial,helvetica">
<!-- -->
	&lt;HTML&gt;<BR>
	&lt;HEAD&gt;<BR>
	&lt;TITLE&gt;@TITLE@&lt;/TITLE&gt;<BR>
	&lt;/HEAD&gt;<P>
	&lt;BODY&gt;<BR>
	&lt;H1&gt;@TITLE@&lt;/H1&gt;<BR>
<!-- -->
	</FONT>
	</TD>
	</TABLE></TD>
</TABLE>
<!-- BOX Close -->
</TD><TD>



<!-- BOX Open -->
<TABLE CELLSPACING=0 CELLPADDING=2 BORDER=0
	
	
>

<TR><TD BGCOLOR="#cccccc"
	><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
	<TR><TD
		 ALIGN=CENTER 
	BGCOLOR="#cccccc"><FONT 
		 FACE="helvetica" 
		
		 COLOR="#000000" 
	>templates/tail.tmpl</FONT></TD>

	<TR><TD
		 BGCOLOR="#eeeeee" 
		
	><FONT FACE="arial,helvetica">
<!-- -->
	Author: jack@hide<BR>
	&lt;/BODY&gt;<BR>
	&lt;/HTML&gt;
<!-- -->
	</FONT>
	</TD>
	</TABLE></TD>
</TABLE>
<!-- BOX Close -->
</TD>
</TABLE>
</DL>

The template is simply an html fragment that may contain variables and if
conditions, as you can do in a .raw file.<BR>
Including an html fragment is quite simple, write it into a file in the
templates directory and call it <B>fragment.tmpl</B> (don't forget the
<B>.tmpl</B> extension).<BR>
To include the template use the
<A HREF="manual_5.html#INCLUDE">@INCLUDE fragment@</A> directive (here you <B>must</B>
omit the <B>templates</B> directory and the <B>.tmpl</B> extension).<BR>
Into the templates directory you can create other directories, in order to
include a file you simply use @INCLUDE dir/fragment@.
<P>

<DT><!-- Step 3: The config files and the conditional generation -->
<DT><P>
<TABLE WIDTH="100%" CELLSPACING=0 CELLPADDING=0 BORDER=0>
<TR><TD BGCOLOR="#eecc66"><A NAME="S3">&nbsp;&nbsp;</A><FONT
	FACE="arial,helvetica"><B>Step 3: The config files and the conditional generation</B></FONT></TD>
	<TD BGCOLOR="#eecc66" ALIGN=right><A HREF="#" onMouseOver="status='Top of the page';		return true"><IMG SRC="images/arrow_up.gif" WIDTH=14 HEIGHT=14		ALT="[ ^ ]" BORDER=0></A></TD>
</TABLE>
<DD><P>
<DD><P>
When wpp is started it first look into the raw directory for a file called
'config' (this is the default, you can specify a different file with the
<A HREF="manual_1.html#--config">config file switch</A>).<BR>
Here you can put common variables and use different config files for
conditional generation of files.<BR>
In example you could create a file called <B>ctest.raw</B>:

<DL>
<DD>



<!-- BOX Open -->
<TABLE CELLSPACING=0 CELLPADDING=2 BORDER=0
	
	
>

<TR><TD BGCOLOR="#cccccc"
	><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
	<TR><TD
		 ALIGN=CENTER 
	BGCOLOR="#cccccc"><FONT 
		 FACE="helvetica" 
		
		 COLOR="#000000" 
	>ctest.raw</FONT></TD>

	<TR><TD
		 BGCOLOR="#eeeeee" 
		
	><FONT FACE="arial,helvetica">
<!-- -->
$Date$<BR>
...<BR>
@IF SHOW_IMAGES@<BR>
&nbsp;&nbsp;&lt;IMG SRC="images/ctest.gif"&gt;<BR>
@ENDIF@<BR>
...<BR>
<!-- -->
	</FONT>
	</TD>
	</TABLE></TD>
</TABLE>
<!-- BOX Close -->
</DL>

Now write three config files:
<UL>
<LI>config.common that contains common variables
<LI>config
<LI>config.noimg
</UL>
The last two configs contains an
<B>@<A HREF="manual_7.html#INCLUDECFG">INCLUDECFG</A> config.common@</B> directive and
a variable declaration <B>@SHOW_IMAGES=y@</B> in <B>config</B>.<BR>
Now if you run<BR>
&nbsp;&nbsp;<B>wpp -c=config.noimg ctest.raw</B><BR>
it generates <B>../ctest.html</B> without images.<BR>
You can set the <A HREF="manual_7.html#DEFAULT_OUTPUTDIR">DEFAULT_OUTPUTDIR</A> to something
different from "<B>..</B>" (i.e. ../noimg.version/ into config.noimg) in order
to create separate versions of <B>ctest.html</B>.

</DL>

<!-- -->
<BR CLEAR=ALL>
<P>
<TABLE BORDER=0 WIDTH="100%" CELLSPACING=0 CELLPADDING=0 BGCOLOR="#000000">
<TR><TD COLSPAN=3 BGCOLOR="#000000"><IMG SRC="images/null.gif" BORDER=0
	WIDTH=1 HEIGHT=2 ALT=""></TD>


<TR>
<TD BGCOLOR="#eecc66">
&nbsp;&nbsp;
<A HREF="#">
	

<FONT FACE="arial,helvetica" COLOR="#000000"><B>^ Top</B></FONT></A>
</TD>
<TD COLSPAN=2 ALIGN=RIGHT BGCOLOR="#eecc66">

<A HREF="manual_2.html">
	

<FONT FACE="arial,helvetica" COLOR="#000000"><B>&lt; Previous</B></FONT></A>

&nbsp;&nbsp;
<A HREF="manual_4.html">
	

<FONT FACE="arial,helvetica" COLOR="#000000"><B>Next &gt;</B></FONT></A>
&nbsp;&nbsp;
</TD>


<TR><TD BGCOLOR="#ffffff" COLSPAN=3><IMG
	SRC="images/null.gif" WIDTH=1 HEIGHT=2 ALT=""></TD>

<TR VALIGN=MIDDLE>
  <TD WIDTH="33%">
		<FONT FACE="arial,helvetica" SIZE="-2" COLOR="#ffffff">
		Marco (LM) Lamberto <A HREF="mailto:lm@geocities.com?subject=WPP - The Web Preprocessor">
	

<FONT FACE="arial,helvetica" COLOR="#ffffff">lm@geocities.com</FONT></A><BR>
		Revised: 2000/12/10 12:34:07

	

		<BR>
		<A HREF="http://www.geocities.com/Tokyo/1474/wpp/manual_3.html"
			>
	

<FONT FACE="arial,helvetica" COLOR="#ffffff">http://www.geocities.com/Tokyo/1474/wpp/manual_3.html</FONT></A>
		</FONT>
	</TD><TD ALIGN=CENTER WIDTH="34%">
		<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
		<TR VALIGN=BOTTOM>

		<TD><A HREF="http://www.geocities.com/Tokyo/1474/wpp/"><IMG  SRC="images/pp_by_wpp.gif" WIDTH=90 HEIGHT=32  ALT="Preprocessed by WPP" BORDER=0></A></TD>

		<TD><IMG SRC="images/null.gif" WIDTH=5 HEIGHT=32 ALT=""></TD>
		<TD><A HREF="http://www.gimp.org/"><IMG  SRC="images/gfx_by_gimp.gif" WIDTH=90 HEIGHT=36  BORDER=0 ALT="Graphics by GIMP"></A></TD>
		</TABLE>
	</TD><TD ALIGN=RIGHT WIDTH="33%">

		<IMG SRC="images/null.gif" WIDTH=90 HEIGHT=32 BORDER=0 ALT="">

	</TD>
</TABLE>
</FONT>
</BODY>
</HTML>
